function e(e,t){var n={};return n.type=e,n.props=t||{},n.children=[].slice.call(arguments,2),n.isComponent="function"==typeof e&&e.prototype&&"function"==typeof e.prototype.render,n.isStateless="function"==typeof e&&!n.isComponent,n.isDom="string"==typeof e,n}var t=["nodes","components","refs"];function n(){this.data={};for(var e=0;e<t.length;e++)this.data[t[e]]=[]}function o(e){var t;t=e,e=Array.isArray(t)?t:[t];for(var o=new n,c=0;c<e.length;c++)o.append(r(e[c]));return o.get()}function r(e){if(Array.isArray(e))return o(e);if("object"!=typeof e)return function(e){var t=new n;return"string"!=typeof e&&"number"!=typeof e||t.append({nodes:document.createTextNode(e+"")}),t.get()}(e);var t=Object.assign({},e.props,{children:[].concat.apply([],e.children||[])});return e.isDom?function(e,t){for(var o=new n,c=[],p=0;p<t.children.length;p++){var s=r(t.children[p]);s.nodes&&(c=c.concat(s.nodes),o.append({components:s.components,refs:s.refs}))}var a,f,i,l,u=document.createElement(e.type);for(var d in e.props)a=u,i=e.props[d],l=void 0,"class"===(f=d)&&(f="className"),"function"==typeof i&&f.substr(0,(l="on").length)===l?a[f.slice(2).toLowerCase()]=i:"checked"===f||"value"===f||"className"===f?a[f]=i:"style"===f?"object"==typeof i?Object.assign(a.style,i):"string"==typeof i&&(a.style.cssText=i):"object"!=typeof i&&"function"!=typeof i&&a.setAttribute(f,i);for(p=0;p<c.length;p++)u.appendChild(c[p]);return t.ref&&o.append({refs:{ref:u,fn:t.ref}}),o.append({nodes:u}),o.get()}(e,t):e.isStateless?function(e,t){var o=new n,c=e.type(t);return o.append(r(c)),o.get()}(e,t):e.isComponent?function(e,t){var o=new n,c=new e.type(t);c.componentWillMount(t);var p=c.render(t);t.ref&&o.append({refs:{ref:c,fn:t.ref}}),o.append(r(p));var s=o.data.nodes;c.base=s.length>1?s:s[0],c._collector={},c._collector.components=o.data.components,c._collector.refs=o.data.refs,o.set({components:[c],refs:[]});for(var a=0;a<c._collector.components.length;a++)c._collector.components[a]._parent=c;return o.get()}(e,t):void 0}function c(e,t){var n=e._collector&&e._collector.components;if(n)for(var o=0;o<n.length;o++)c(n[o],t);t(e)}function p(e,t){var n=r(e),o={_collector:n},p=n.nodes.length<2?n.nodes[0]:n.nodes;return"function"==typeof t?t(p):t&&t.appendChild(p),c(o,function(e){for(var t=0;t<e._collector.refs.length;t++)e._collector.refs[t].fn(e._collector.refs[t].ref),e._collector.refs[t].ref=null}),c(o,function(e){e.componentDidMount&&e.componentDidMount(e.props)}),o=void 0,n}n.prototype.append=function(e){for(var t in e)this.data[t]=this.data[t].concat(e[t])},n.prototype.set=function(e){for(var t in e)this.data[t]=e[t]},n.prototype.get=function(){return this.data};var s=function(e){this.props=e};s.prototype.render=function(){},s.prototype.destroy=function(){},s.prototype.componentWillMount=function(){},s.prototype.componentDidMount=function(){},s.prototype.componentWillUnmount=function(){};export{s as Component,e as h,p as render};
