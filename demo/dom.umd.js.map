{"version":3,"file":"dom.umd.js","sources":["../lib/core.js","../lib/jsx.js","demo.js"],"sourcesContent":["'use strict'\n\n/**\n * @module dom\n */\n\n// force array\nfunction arr (e) { return Array.isArray(e) ? e : [e] }\n\nvar VENDORSPREFIXES = {\n  'transform': ['-webkit-', '-ms-']\n}\n\n/**\n * Stylize an element\n * @param {HTMLElement} element A HTML element\n * @param {object} style An object containing style properties\n */\nexport function css (el, style) {\n  for (var k in style) {\n    el.style[k] = style[k]\n    if (!VENDORSPREFIXES[k]) continue\n    var pre = VENDORSPREFIXES[k]\n    for (var i = 0; i < pre.length; i++) el.style[pre[i] + k] = style[k]\n  }\n}\n\n/**\n * Apply custom data to an element\n * @param {HTMLElement} element A HTML element\n * @param {object} dataset An object containing custom data properties\n */\nexport function data (element, dataset) {\n  for (var k in dataset) element.dataset[k] = dataset[k]\n}\n\n/**\n * Set attributes to an element\n * @param {HTMLElement} element A HTML element\n * @param {object} attrs An object containing element attributes\n */\nexport function attr (element, attrs) {\n  for (var k in attrs) element.setAttribute(k, attrs[k])\n}\n\n/**\n * Add classes to an element\n * @param {HTMLElement} element A HTML element\n * @param {(string|array)} dataset A string or an array containing class names\n */\nexport function classes (element, list) {\n  list = arr(list)\n  for (var i = 0; i < list.length; i++) element.list.add(list[i])\n}\n\n/**\n * Create a new HTML Element\n * @param {string} tagname HTML Element tag name\n * @param {object} props Element properties\n * @param {array} children Element children\n */\nexport function node (tagname, props, children) {\n  if (!props) props = {}\n  var $ = document.createElement(tagname)\n  for (var k in props) {\n    if (k === 'classes' || k === 'classlist') {\n      classes($, props[k])\n    } else if (k === 'css') {\n      css($, props[k])\n    } else if (k === 'attributes' || k === 'attr') {\n      attr($, props[k])\n    } else if (k === 'dataset' || k === 'data') {\n      data($, props[k])\n    } else if (k !== 'ref') {\n      $[k] = props[k]\n    }\n  }\n  if (children) {\n    for (var i = 0; i < children.length; i++) {\n      const n = children[i]\n      const t = typeof n\n      if (t === 'string' || t === 'number' || t === 'boolean' || t === 'number' || !n) {\n        $.appendChild(document.createTextNode(n + ''))\n      } else {\n        $.appendChild(n)\n      }\n    }\n  }\n  if (typeof props.ref === 'function') props.ref($)\n  return $\n}\n","const React = { createElement }\nconst h = createElement\n\nfunction startsWith (str, search) {\n  return str.substr(0, search.length) === search\n}\n\nfunction createElement (el, props) {\n  if (props === null) props = {}\n  var i, k\n  var ref = props.ref\n  delete props.ref\n  var children = [].concat.apply([], [].slice.call(arguments, 2)) // array & flatten\n\n  var domChildren = []\n  for (i = 0; i < children.length; i++) {\n    var child = children[i]\n    if (typeof child === 'string' || typeof child === 'number') {\n      domChildren.push(document.createTextNode(child))\n    } else if (!child) {\n      continue\n    } else {\n      domChildren.push(child)\n    }\n  }\n\n  if (typeof el === 'string') {\n    var domEl = document.createElement(el)\n    for (k in props) setAttribute(domEl, k, props[k])\n    for (i = 0; i < domChildren.length; i++) domEl.appendChild(domChildren[i])\n    ref && ref(domEl)\n    return domEl\n  }\n\n  if (typeof el === 'function') {\n    props.children = children\n    var e\n    var isStateless = !el.prototype || typeof el.prototype.render !== 'function'\n    if (isStateless) {\n      e = el(props)\n      ref && ref(e)\n    } else {\n      const instance = new el(props) // eslint-disable-line\n      console.log(instance)\n      e = instance.render(props)\n      ref && ref(instance)\n    }\n    return e\n  }\n}\n\nfunction setAttribute (dom, key, value) {\n  if (key === 'class') key = 'className'\n  if (typeof value === 'function' && startsWith(key, 'on')) {\n    const eventType = key.slice(2).toLowerCase()\n    dom[eventType] = value\n  } else if (key === 'checked' || key === 'value' || key === 'className') {\n    dom[key] = value\n  } else if (key === 'style') {\n    if (typeof value === 'object') Object.assign(dom.style, value)\n    else if (typeof value === 'string') dom.style.cssText = value\n  } else if (typeof value !== 'object' && typeof value !== 'function') {\n    dom.setAttribute(key, value)\n  }\n};\n\nexport { h, React }\n","import { el, h } from '../index' // eslint-disable-line\n\nvar pre\nel(\n  'div',\n  { ref (e) { document.body.appendChild(e) } },\n  [ 'Debug :', el('pre', { ref (e) { pre = e } }) ]\n)\n\nfunction Test2 ({ name }) {\n  return [name, <span style={{ color: 'red' }}></span>]\n}\n\nfunction Test ({ name }) {\n  return <p>{name} <Test2 name='nested'/></p>\n}\n\npre.textContent = (\n  <div class=\"test\">\n    generated from lib/jsx\n    <Test name='component' />\n  </div>\n).outerHTML\n"],"names":["VENDORSPREFIXES","transform","css","el","style","k","pre","i","length","data","element","dataset","attr","attrs","setAttribute","classes","list","e","Array","isArray","add","node","tagname","props","children","$","document","createElement","const","n","t","appendChild","createTextNode","ref","h","concat","apply","slice","call","arguments","domChildren","child","push","domEl","isStateless","prototype","render","instance","console","log","dom","key","value","search","substr","toLowerCase","Object","assign","cssText","Test2","body","textContent"],"mappings":"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"}