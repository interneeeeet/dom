{"version":3,"file":"dom.umd.js","sources":["../lib/core.js","../lib/jsx.js","demo.js"],"sourcesContent":["'use strict'\n\n/**\n * @module dom\n * @example\n * import { el, css, ... } from '@internet/dom'\n */\n\n// force array\nfunction arr (e) { return Array.isArray(e) ? e : [e] }\n\nvar VENDORSPREFIXES = {\n  'transform': ['-webkit-', '-ms-']\n}\n\n/**\n * Stylize an element\n * @param {HTMLElement} element A HTML element\n * @param {object} style An object containing style properties\n * @return {HTMLElement}\n * @category Core\n */\nexport function css (el, style) {\n  for (var k in style) {\n    el.style[k] = style[k]\n    if (!VENDORSPREFIXES[k]) continue\n    var pre = VENDORSPREFIXES[k]\n    for (var i = 0; i < pre.length; i++) el.style[pre[i] + k] = style[k]\n  }\n  return el\n}\n\n/**\n * Apply custom data to an element\n * @param {HTMLElement} element A HTML element\n * @param {object} dataset An object containing custom data properties\n * @return {HTMLElement}\n * @category Core\n */\nexport function data (el, dataset) {\n  for (var k in dataset) el.dataset[k] = dataset[k]\n  return el\n}\n\n/**\n * Set attributes to an element\n * @param {HTMLElement} element A HTML element\n * @param {object} attrs An object containing element attributes\n * @return {HTMLElement}\n * @category Core\n */\nexport function attr (el, attrs) {\n  for (var k in attrs) el.setAttribute(k, attrs[k])\n  return el\n}\n\n/**\n * Add classes to an element\n * @param {HTMLElement} element A HTML element\n * @param {(string|array)} dataset A string or an array containing class names\n * @return {HTMLElement}\n * @category Core\n */\nexport function classes (el, list) {\n  list = arr(list)\n  for (var i = 0; i < list.length; i++) el.list.add(list[i])\n  return el\n}\n\n/**\n * Create a new HTML Element\n * @param {string} tagname HTML Element tag name\n * @param {object} props Element properties. You can use callback refs.\n * @param {array} children Element children\n * @return {HTMLElement}\n * @category Core\n */\nexport function el (tagname, props, children) {\n  if (!props) props = {}\n  var $ = document.createElement(tagname)\n  for (var k in props) {\n    if (k === 'classes' || k === 'classlist') {\n      classes($, props[k])\n    } else if (k === 'css') {\n      css($, props[k])\n    } else if (k === 'attributes' || k === 'attr') {\n      attr($, props[k])\n    } else if (k === 'dataset' || k === 'data') {\n      data($, props[k])\n    } else if (k !== 'ref') {\n      $[k] = props[k]\n    }\n  }\n  if (children) {\n    for (var i = 0; i < children.length; i++) {\n      var n = children[i]\n      var t = typeof n\n      if (t === 'string' || t === 'number' || t === 'boolean' || t === 'number' || !n) {\n        $.appendChild(document.createTextNode(n + ''))\n      } else {\n        $.appendChild(n)\n      }\n    }\n  }\n  if (typeof props.ref === 'function') props.ref($)\n  return $\n}\n","'use strict'\n\nvar React = { createElement }\nvar h = createElement\n\nfunction startsWith (str, search) {\n  return str.substr(0, search.length) === search\n}\n\nfunction createElement (el, props) {\n  if (props === null) props = {}\n  var i, k\n  var ref = props.ref\n  delete props.ref\n  var children = [].concat.apply([], [].slice.call(arguments, 2)) // array & flatten\n\n  var domChildren = []\n  for (i = 0; i < children.length; i++) {\n    var child = children[i]\n    if (typeof child === 'string' || typeof child === 'number') {\n      domChildren.push(document.createTextNode(child))\n    } else if (!child) {\n      continue\n    } else {\n      domChildren.push(child)\n    }\n  }\n\n  if (typeof el === 'string') {\n    var domEl = document.createElement(el)\n    for (k in props) setAttribute(domEl, k, props[k])\n    for (i = 0; i < domChildren.length; i++) domEl.appendChild(domChildren[i])\n    ref && ref(domEl)\n    return domEl\n  }\n\n  if (typeof el === 'function') {\n    props.children = children\n    var e\n    var isStateless = !el.prototype || typeof el.prototype.render !== 'function'\n    if (isStateless) {\n      e = el(props)\n      ref && ref(e)\n    } else {\n      var instance = new el(props) // eslint-disable-line\n      e = instance.render(props)\n      ref && ref(instance)\n    }\n    return e\n  }\n}\n\nfunction setAttribute (dom, key, value) {\n  if (key === 'class') key = 'className'\n  if (typeof value === 'function' && startsWith(key, 'on')) {\n    var eventType = key.slice(2).toLowerCase()\n    dom[eventType] = value\n  } else if (key === 'checked' || key === 'value' || key === 'className') {\n    dom[key] = value\n  } else if (key === 'style') {\n    if (typeof value === 'object') Object.assign(dom.style, value)\n    else if (typeof value === 'string') dom.style.cssText = value\n  } else if (typeof value !== 'object' && typeof value !== 'function') {\n    dom.setAttribute(key, value)\n  }\n};\n\nexport { h, React }\n","import { el, h } from '../lib' // eslint-disable-line\n\nvar pre\nel(\n  'div',\n  { ref (e) { document.body.appendChild(e) } },\n  [ 'Debug :', el('pre', { ref (e) { pre = e } }) ]\n)\n\nfunction Test2 ({ name }) {\n  return [name, <span style={{ color: 'red' }}></span>]\n}\n\nfunction Test ({ name }) {\n  return <p>{name} <Test2 name='nested'/></p>\n}\n\npre.textContent = (\n  <div class=\"test\">\n    generated from lib/jsx\n    <Test name='component' />\n  </div>\n).outerHTML\n"],"names":["VENDORSPREFIXES","transform","css","el","style","k","pre","i","length","data","dataset","attr","attrs","setAttribute","classes","list","e","Array","isArray","add","tagname","props","children","$","document","createElement","n","t","appendChild","createTextNode","ref","h","concat","apply","slice","call","arguments","domChildren","child","push","domEl","isStateless","prototype","render","instance","dom","key","value","search","substr","toLowerCase","Object","assign","cssText","Test2","body","textContent"],"mappings":"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"}