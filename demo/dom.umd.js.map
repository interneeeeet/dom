{"version":3,"file":"dom.umd.js","sources":["../lib/h.js","../lib/Component.js","../lib/Collector.js","../lib/renderers/array.js","../lib/renderers/raw.js","../lib/renderers/directdom.js","../lib/renderers/primitive.js","../lib/renderers/dom.js","../lib/renderers/stateless.js","../lib/renderers/class.js","../lib/dispatch.js","../lib/render.js","demo.js"],"sourcesContent":["'use strict'\n\n/**\n * > Creates a VNode (virtual DOM element).\n *\n * @param {string | function} nodeName A tagname or a component. e.g. `'div'`, `'a'`, `Component`\n * @param {object|null} [props=null] Attributes/props to set on the created element.\n * @param {VNode[]} [rest] All additional arguments are vnode children to append to\n *\n * @return {object} A object containing the vnode and its props / children\n *\n * @example\n * import { h, render } from '@internet/dom'\n *\n * // Create a new vnode using JSX (via Babel or Bubl√©)\n * const node = <div style=\"color: red\">Hello</div>\n *\n * // The same node can be made using directly the `h` function\n * const node = h('div', { style: 'color: red' }, 'Hello')\n *\n * // render the created node into <body>\n * render(node, document.body)\n */\nfunction h (type, props) {\n  var vn = {}\n  vn.type = type\n  vn.props = props || {}\n  vn.children = [].concat.apply([], [].slice.call(arguments, 2)) // array & flatten\n\n  vn.isComponent = typeof type === 'function' && type.prototype && typeof type.prototype.render === 'function'\n  vn.isStateless = typeof type === 'function' && !vn.isComponent\n  vn.isDom = typeof type === 'string'\n  return vn\n}\n\nexport default h\n","'use strict'\n\nfunction Component (props) {\n  this._parent = null\n  this._collector = { refs: [], components: [] }\n  this.props = props || {}\n  this.base = null\n  this.mounted = false\n}\n\nComponent.prototype.componentWillMount = function componentWillMount () {}\nComponent.prototype.render = function render () {}\nComponent.prototype.componentDidMount = function componentDidMount () {}\nComponent.prototype.componentWillUnmount = function componentWillUnmount () {}\n\nComponent.prototype.registerComponent = function registerComponent (c) {\n  if (!c.render || ~this._collector.components.indexOf(c)) return\n  c._parent = this\n  this._collector.components.push(c)\n}\n\nComponent.prototype.unregisterComponent = function unregisterComponent (c) {\n  var index = this._collector.components.indexOf(c)\n  if (!c.render || !~index) return\n  c._parent = null\n  this._collector.components.splice(index, 1)\n}\n\nComponent.prototype.destroy = function destroy () {\n  var i = 0\n\n  // destroy subcomponents\n  for (i = this._collector.components.length - 1; i >= 0; i--) {\n    this._collector.components[i].destroy()\n  }\n\n  if (this._parent) this._parent.unregisterComponent(this)\n  this.componentWillUnmount(this.props)\n  this.mounted = false\n\n  // callback all ref with null and destroy them from the collector\n  for (i = this._collector.refs.length - 1; i >= 0; i--) {\n    this._collector.refs[i].fn(null)\n    this._collector.refs.splice(i, 1)\n  }\n\n  // Unmount from dom\n  var base = Array.isArray(this.base) ? this.base : [this.base]\n  for (i = 0; i < base.length; i++) {\n    if (base[i] && base[i].parentNode) base[i].parentNode.removeChild(base[i])\n  }\n\n  this.base = base = null\n  this.props = null\n}\n\nexport default Component\n","'use strict'\n\nvar TYPES = ['nodes', 'components', 'refs']\n\nfunction Collector () {\n  this.data = {}\n  for (var i = 0; i < TYPES.length; i++) this.data[TYPES[i]] = []\n}\n\nCollector.prototype.append = function (obj) {\n  for (var k in obj) this.data[k] = this.data[k].concat(obj[k])\n}\n\nCollector.prototype.set = function (obj) {\n  for (var k in obj) this.data[k] = obj[k]\n}\n\nCollector.prototype.get = function () {\n  return this.data\n}\n\nexport default Collector\n","'use strict'\n\nimport Collector from '../Collector'\nimport rawRender from './raw'\n\nfunction arr (e) { return Array.isArray(e) ? e : [e] }\n\nfunction renderArray (vdoms) {\n  vdoms = arr(vdoms)\n  var collector = new Collector()\n  for (var i = 0; i < vdoms.length; i++) collector.append(rawRender(vdoms[i]))\n  return collector.get()\n}\n\nexport default renderArray\n","'use strict'\n\nimport renderArray from './array'\nimport renderClass from './class'\nimport renderDirectDom from './directdom'\nimport renderDom from './dom'\nimport renderPrimitive from './primitive'\nimport renderStateless from './stateless'\n\nfunction rawRender (vdom) {\n  if (Array.isArray(vdom)) return renderArray(vdom)\n  if (vdom instanceof window.Element) return renderDirectDom(vdom)\n  if (typeof vdom !== 'object') return renderPrimitive(vdom)\n\n  // one-level deep flatten children array\n  var props = Object.assign(\n    {},\n    vdom.props,\n    { children: [].concat.apply([], vdom.children || []) }\n  )\n\n  if (vdom.isDom) return renderDom(vdom, props)\n  if (vdom.isStateless) return renderStateless(vdom, props)\n  if (vdom.isComponent) return renderClass(vdom, props)\n}\n\nexport default rawRender\n","'use strict'\n\nimport Collector from '../Collector'\n\nfunction renderDirectDom (vdom, props) {\n  var collector = new Collector()\n  collector.append({ nodes: vdom })\n  return collector.get()\n}\n\nexport default renderDirectDom\n","'use strict'\n\nimport Collector from '../Collector'\n\nfunction renderPrimitive (vdom) {\n  var collector = new Collector()\n  if (typeof vdom === 'string' || typeof vdom === 'number') {\n    collector.append({ nodes: document.createTextNode(vdom + '') })\n  }\n  return collector.get()\n}\n\nexport default renderPrimitive\n","'use strict'\n\nimport Collector from '../Collector'\nimport rawRender from './raw'\n\nfunction startsWith (str, w) { return str.substr(0, w.length) === w }\n\n// set attributes for a dom node\nfunction setAttribute (dom, key, value) {\n  if (key === 'class') key = 'className'\n  if (typeof value === 'function' && startsWith(key, 'on')) {\n    var eventType = key.slice(2).toLowerCase()\n    dom[eventType] = value\n  } else if (key === 'checked' || key === 'value' || key === 'className') {\n    dom[key] = value\n  } else if (key === 'style') {\n    if (typeof value === 'object') Object.assign(dom.style, value)\n    else if (typeof value === 'string') dom.style.cssText = value\n  } else if (typeof value !== 'object' && typeof value !== 'function') {\n    dom.setAttribute(key, value)\n  }\n}\n\nfunction renderDom (vdom, props) {\n  // render and collect vdom's children\n  var collector = new Collector()\n  var domChildren = []\n  for (var i = 0; i < props.children.length; i++) {\n    var result = rawRender(props.children[i])\n    if (result.nodes) {\n      domChildren = domChildren.concat(result.nodes)\n      collector.append({ components: result.components, refs: result.refs })\n    }\n  }\n\n  // create dom element\n  var el = document.createElement(vdom.type)\n  for (var k in vdom.props) setAttribute(el, k, vdom.props[k])\n  for (i = 0; i < domChildren.length; i++) el.appendChild(domChildren[i])\n\n  if (props.ref) collector.append({ refs: { ref: el, fn: props.ref } })\n  collector.append({ nodes: el })\n  return collector.get()\n}\n\nexport default renderDom\n","'use strict'\n\nimport Collector from '../Collector'\nimport rawRender from './raw'\n\nfunction renderStateless (_vdom, props) {\n  var collector = new Collector()\n  var vdom = _vdom.type(props)\n  collector.append(rawRender(vdom))\n  return collector.get()\n}\n\nexport default renderStateless\n","'use strict'\n\nimport Collector from '../Collector'\nimport rawRender from './raw'\n\nfunction renderClass (_vdom, props) {\n  var collector = new Collector()\n\n  // instanciate it and call willMount\n  var instance = new _vdom.type(props) // eslint-disable-line\n  instance.componentWillMount(props)\n\n  var vdom = instance.render(props)\n  // append its own ref ? not sur if I need to do this here or in the collector reset\n  if (props.ref) collector.append({ refs: { ref: instance, fn: props.ref } })\n  collector.append(rawRender(vdom))\n\n  // create a useful \"base\" property\n  var nodes = collector.data.nodes\n  instance.base = nodes.length > 1 ? nodes : nodes[0]\n\n  // collect all sub refs / components and add them to the instance's own collector\n  instance._collector = {}\n  instance._collector.components = collector.data.components\n  instance._collector.refs = collector.data.refs\n\n  // reset the collector (collector.components only contains the current instance)\n  // used for possible parents and for correct didmount / refs dispatching\n  collector.set({ components: [instance], refs: [] })\n\n  // add a parent \"private\" property to each sub-components\n  for (var i = 0; i < instance._collector.components.length; i++) {\n    instance._collector.components[i]._parent = instance\n  }\n\n  return collector.get()\n}\n\nexport default renderClass\n","'use strict'\n\nexport function dispatch (component, cb, topDown) {\n  var subs = component._collector && component._collector.components\n  if (topDown) cb(component)\n  if (subs) for (var i = 0; i < subs.length; i++) dispatch(subs[i], cb)\n  if (!topDown) cb(component)\n}\n\nfunction callRefs (component) {\n  for (var i = 0; i < component._collector.refs.length; i++) {\n    component._collector.refs[i].fn(component._collector.refs[i].ref)\n    component._collector.refs[i].ref = null // Is this really needed or a good thing ?\n  }\n}\n\nexport function dispatchRefs (component) {\n  dispatch(component, callRefs)\n}\n","'use strict'\n\nimport rawRender from './renderers/raw'\nimport { dispatchRefs, dispatch } from './dispatch'\n\n/**\n * > Render a virtual node into a `parent` Element\n *\n * @param {object} vnode A (JSX) VNode to render\n * @param {(HTMLElement|function)} mountTo DOM Element to render into. **You can also use a callback function.** The function will be called with DOM Elements to mount as first argument\n * @param {Component} [context] Component instance to attach rendered components and callback refs to (See example below)\n *\n * @return {object} Return an object containing:\n *   - `result.nodes` : Array of rendered DOM nodes\n *   - `result.components` : First-level components instances\n *   - `result.refs` : First-level callback refs\n *\n * @example\n * import { render, Component } from '@internet/dom'\n *\n * class App extends Component {\n *   render () {\n *     return (\n *        <main>\n *          <ul ref={el => this.ul = el}></ul>\n *          <button ref={el => this.button = el}>Add item</button>\n *        </main>\n *     )\n *   }\n *\n *   componentDidMount () {\n *    this.count = 0\n *    this.addItem = this.addItem.bind(this)\n *    this.button.addEventListener('click', this.addItem)\n *   }\n *\n *   addItem () {\n *     // Instanciate a new Item and append-it to the list.\n *     // By passing App instance as context to the rendered,\n *     // Rendered <Item> is added to the App's subcomponents list\n *     this.count++\n *     render(<Item count={this.count} />, li => this.ul.appendChild(li), this)\n *   }\n *\n *   componentWillUmount() {\n *     this.button.removeEventListener('click', this.addItem)\n *   }\n * }\n *\n * // Instanciate App component and append-it into <body>\n * render(<App />, document.body)\n */\nfunction render (vnode, parent, context) {\n  var rendered = rawRender(vnode)\n  var mockComponent = { _collector: rendered } // for dispatch convenience\n\n  // mount here\n  var nodes = rendered.nodes.length < 2 ? rendered.nodes[0] : rendered.nodes\n  if (typeof parent === 'function') parent(nodes)\n  else if (parent) parent.appendChild(nodes)\n\n  // dispatch callback refs\n  dispatchRefs(mockComponent)\n  dispatch(mockComponent, function (c) {\n    c.mounted = true\n    c.componentDidMount && c.componentDidMount(c.props)\n  })\n\n  // Add items to context\n  if (context && context._collector) {\n    var c = context._collector\n    for (var i = 0; i < rendered.components.length; i++) {\n      rendered.components[i]._parent = context\n    }\n    if (c.refs) c.refs = c.refs.concat(rendered.refs)\n    if (c.components) c.components = c.components.concat(rendered.components)\n  }\n\n  mockComponent = undefined\n  return rendered\n}\n\nexport default render\n","import { h, render, Component } from '../lib' // eslint-disable-line\n\nconst noop = () => {}\nconst refs = {}\nconst ref = k => r => { refs[k] = r; console.log(r ? 'Reference ' + k : 'De-reference ' + k) }\n\nclass Item extends Component {\n  render ({ count }) {\n    return (\n      <li>\n        <button ref={r => { this.addButton = r }}>Add list</button>\n        <button ref={r => { this.removeButton = r }}>Remove item {count}</button>\n      </li>\n    )\n  }\n\n  remove () {\n    this.destroy()\n  }\n\n  add () {\n    render(<List />, el => this.base.appendChild(el), this)\n  }\n\n  componentDidMount () {\n    this.remove = this.remove.bind(this)\n    this.add = this.add.bind(this)\n    this.removeButton.addEventListener('click', this.remove)\n    this.addButton.addEventListener('click', this.add)\n  }\n\n  componentWillUnmount () {\n    this.removeButton.removeEventListener('click', this.remove)\n    this.addButton.removeEventListener('click', this.add)\n  }\n}\n\nclass List extends Component {\n  render ({ children }) {\n    return (\n      <div>\n        <ul ref={e => { this.ul = e }} />\n        <button ref={e => { this.button = e }}>Add item</button>\n      </div>\n    )\n  }\n\n  componentDidMount () {\n    this.count = 0\n    this.addItem = this.addItem.bind(this)\n    this.button.addEventListener('click', this.addItem)\n  }\n\n  addItem () {\n    console.log(this._collector)\n    render(\n      <Item count={++this.count} ref={ref(`Item ${this.count}`)} />,\n      el => this.ul.appendChild(el),\n      this\n    )\n  }\n\n  componentWillUnmount () {\n    this.button.removeEventListener('click', this.addItem)\n  }\n}\n\nconst result = render(<List name='0 - ' />, document.body)\n\nconsole.log(result)\n"],"names":["h","type","props","vn","children","concat","apply","slice","call","arguments","isComponent","prototype","render","isStateless","isDom","Component","this","_parent","_collector","refs","components","base","mounted","componentWillMount","componentDidMount","componentWillUnmount","registerComponent","c","indexOf","push","unregisterComponent","index","splice","destroy","i","length","fn","Array","isArray","parentNode","removeChild","TYPES","Collector","data","renderArray","vdoms","e","collector","append","rawRender","get","vdom","window","Element","nodes","renderDirectDom","document","createTextNode","renderPrimitive","Object","assign","domChildren","result","dom","key","value","w","el","createElement","k","substr","toLowerCase","style","cssText","setAttribute","appendChild","ref","renderDom","_vdom","renderStateless","instance","set","renderClass","dispatch","component","cb","topDown","subs","callRefs","vnode","parent","context","rendered","mockComponent","undefined","obj","const","Item","remove","add","addButton","addItem","r","console","log"],"mappings":"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"}